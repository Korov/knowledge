# Linux快捷键

启动时进入图形界面，后来想切换到字符界面：
使用Ctrl+Alt+F1~Ctrl+Alt+F6，可切换到不同的字符控制台（只是六个字符控制台，此外没有区别），再使用Ctrl+Alt+F7可切换回图形界面；
如果是在虚拟机vmware 中，图形界面切换到字符界面：
使用Ctrl+Alt+Shift+F1~Ctrl+Alt+Shift+F6，再使用Alt+F7 可切换回图形界面。
（注：以上方法切换后，图形界面并没有关闭）

| 快捷键  | 作用                         | 备注 |
| ------- | ---------------------------- | ---- |
| sudo su | linux进入管理员权限界面      |      |
| startx  | 切换到图形界面               |      |
| init 3  | 图形界面完全关闭进入文本模式 |      |

# docker快捷键

## 1.启动关闭docker

启动        systemctl start docker
守护进程重启   sudo systemctl daemon-reload
重启docker服务   systemctl restart  docker
重启docker服务  sudo service docker restart
关闭docker   service docker stop   
关闭docker  systemctl stop docker

## 2.查看docker镜像

docker images

## 3.创建docker镜像

```bash
docker build -t eureka:1.0 .
#创建了一个eureka镜像，版本1.0，后面的.表示dockerfile的相对位置
docker run -d -p 7001:7001 eureka:1.0
#启动镜像

docker build -t rabbitmq:3.8-rc-alpine .
#启动rabbitmq:3.8-rc-alpine容器
docker run -d -p 5672:5672 -p 15672:15672 --name rabbitmq rabbitmq:3.8-rc-alpine

#将镜像rabbitmq:3.8-rc-alpine保存为rabbitmq3.8.tar到当前文件夹
docker save rabbitmq:3.8-rc-alpine -o rabbitmq3.8.tar
#从当前文件夹加载rabbitmq3.8.tar为docker中的镜像
docker load -i rabbitmq3.8.tar
```

## 4.导出docker镜像

```bash
docker save redis:5-alpine -o redis5.tar
docker load -i redis5.tar
```

## 5.暂停所有镜像，删除所有容器

```bash
docker stop `docker ps -a -q`;
docker rm `docker ps -a -q`;
#停止并删除所有容器
docker rmi `docker images -q`;
#删除所有镜像
```

## 6.错误处理

```bash
docker info中出现警告：
vi /etc/sysctl.conf
添加如下内容
net.bridge.bridge-nf-call-ip6tables = 1
net.bridge.bridge-nf-call-iptables = 1
执行：
sysctl -p
```

## 7.查看日志

```bash
docker logs -f -t --since="2019-05-04" --tail=100 flamboyant_swirles
 
--since : 此参数指定了输出日志开始日期，即只输出指定日期之后的日志。
 
-f : 查看实时日志
 
-t : 查看日志产生的日期
 
-tail=10 : 查看最后的10条日志。
 
stupefied_albattani : 容器名
```

## 7.进入docker容器的命令模式

```bash
#docker进入容器的方式
docker run -it mysql:8.0.11 /bin/bash
#使用容器id进入
docker attach 44fc0f0582d9
```

## 8.使用数据卷实现本地数据持久化

```bash
使用数据卷实现本地数据持久化：
最开始 -v 或者 --volume 选项是给单独容器使用， --mount 选项是给集群服务使用。但是从 Docker 17.06 开始，也可以在单独容器上使用 --mount。通常来讲 --mount 选项也更加具体(explicit)和”啰嗦”(verbose)，最大的区别是

    -v 选项将所有选项集中到一个值
    --mount 选项将可选项分开

如果需要指定 volume driver 选项，那么必须使用 --mount

    -v 或 --volume: 包含三个 field，使用 : 来分割，所有值需要按照正确的顺序。第一个 field 是 volume 的名字，并且在宿主机上唯一，对于匿名 volume，第一个field通常被省略；第二个field是宿主机上将要被挂载到容器的path或者文件；第三个field可选，比如说 ro（只读）rw（读写）

    --mount: 包含多个 key-value 对，使用逗号分割。--mount 选项更加复杂，但是各个值之间无需考虑顺序。
        type，可以为 bind（绑定数据卷，映射到主机路径下）, volume（普通数据卷，映射到主机路径下）, tmpfs（临时数据卷，只存于内存中）, 通常为 volume
        source 也可以写成 src，对于 named volumes，可以设置 volume 的名字，对于匿名 volume，可以省略
        destination 可以写成 dst或者 target 该值会挂载到容器
        readonly 可选，如果使用，表示只读
        volume-opt 可选，可以使用多次
docker run -p 3306:3306 --name mymysql -v $PWD/conf:/etc/mysql/conf.d -v $PWD/logs:/logs -v $PWD/data:/var/lib/mysql -e 
docker run -p 3306:3306 --name mymysql --mount source=$PWD/conf,destination=/etc/mysql/conf.d --mount source=$PWD/logs,destination=/logs --mount source=$PWD/data,destination=/var/lib/mysql -e 

#创建数据卷容器，数据卷容器也是一个容器
创建dbdata容器
docker run it -v /dbdata --ame dbdata ubuntu
可以在其他容器中使用--volumes-from 来挂载dbdata 容器中的数据卷，例如创建dbl 和db2 两个容器，并从dbdata 容器挂载数据卷：
$ docker run -it --volumes-from dbdata -name dbl ubuntu
$ docker run -it --volumes-from dbdata －口ame db2 ubuntu
此时， 容器dbl 和db2 都挂载同一个数据卷到相同的／ dbdata 目录，三个容器任何一方在该目录下的写人，其他容器都可以看到。
可以多次使用--volumes-from 参数来从多个容器挂载多个数据卷，还可以从其他已经挂载了容器卷的容器来挂载数据卷：
$ docker run -d --name db3 --volumes-from dbl training/postgres
如果删除了挂载的容器（包括dbdata 、db 工和db2 ），数据卷并不会被自动删除。如果要删除一个数据卷，必须在删除最后一个还挂载着它的容器时显式使用dock er rm -v 命令来指定同时删除关联的容器。

可以利用数据卷容器对其中的数据卷进行备份、恢复，以实现数据的迁移。
1. 备份
使用下面的命令来备份dbdata 数据卷容器内的数据卷：
$ docker run -volumes-from dbdata -v $ (pwd) : /backup - -name worker ubuntu tar
cvf /backup/backup.tar /dbdata
这个命令稍微有点复杂，具体分析下。
首先利用ubuntu 镜像创建了一个容器worker 。使用－ -volumes-from dbdata 参数
来让worker 容器挂载db data 容器的数据卷（ 即dbdata 数据卷）；使用-v $ (pwd) : /backup
参数来挂载本地的当前目录到worker容器的/backup 目录。
worker 容器启动后，使用tarcvf/backup/backup.tar /dbdata 命令将/dbdata
下内容备份为容器内的/backup/backup.tar ，即宿主主机当前目录下的backup.tar 。
2. 恢复
如果要恢复数据到一个容器，可以按照下面的操作。
首先创建一个带有数据卷的容器d bdata2:
$ docker run -v /dbdata --name dbdata2 ubuntu /bin/bash
然后创建另一个新的容器，挂载dbda ta2 的容器，并使用untar 解压备份文件到所挂
载的容器卷中：
$docker run --volumes-from dbdata2 -v $(pwd) :/backup busybox tar xvf
/backup/backup.tar
```

## 9.dockerfile

```bash
#启动docker
docker build -t eureka:1.0 .
docker run -d -p 7001:7001 eureka:1.0
```



```bash
Dockerfile 由一行行命令语句组成， 并且支持以＃开头的注释行。
一般而言， Dockerfile 主体内容分为四部分：基础镜像信息、维护者信息、镜像操作指令和容器启动时执行指令。
首行可以通过注释来指定解析器命令， 后续通过注释说明镜像的相关信息。主体部分首
先使用FROM指令指明所基于的镜像名称， 接下来一般是使用LABEL指令说明维护者信息。
后面则是镜像操作指令， 例如RUN指令将对镜像执行跟随的命令。每运行一条RUN指令，
镜像添加新的一层， 并提交。最后是CMD指令， 来指定运行容器时的操作命令。

Dockerfile中的指令及说明
ARG：定义创建镜像过程中使用的变量
FROM：指定所创建镜像的基础镜像
LABEL：为生成的镜像添加元数据标签信息
EXPOSE：声明镜像内服务监听的端口
ENV：指定环境变量
ENTRYPOINT：指定镜像的默认入口命令
VOLUME：创建一个数据卷挂载点
USER：指定运行容器时的用户名或UID
WORKDIR：配置工作目录
ONBUILD：创建子镜像时指定自动执行的操作指令
STOPSIGNAL：指定退出的信号值
HEALTHCHECK：配置所启动容器如何进行健康检查
SHELL：指定默认shell类型
RUN：运行指定命令
CMD：启动容器时指定默认执行的命令
ADD：添加内容到镜像
COPY：复制内容到镜像

1.ARG：
定义创建镜像过程中使用的变量。
格式为ARG <name>[=<default value>]
在执行docker build 时， 可以通过-build-arg[=l 来为变量赋值。当镜像编译成功后， ARG 指定的变量将不再存在(ENV 指定的变量将在镜像中保留）。Docker 内置了一些镜像创建变量， 用户可以直接使用而无须声明， 包括（不区分大小
写） HTTP PROXY 、HTTPS PROXY 、FTP PROXY 、NO PROXY。
2. FROM
指定所创建镜像的基础镜像。（若本地已经加载该镜像则from会从本地加载该镜像，本地未找到则从远端加载该镜像）
格式为FROM <image> [AS <name>] 或FROM <image>: <tag> [AS <name>]
或FROM <image>@<digest> [AS <name>] 。
任何Dockerfile 中第一条指令必须为FROM 指令。并且， 如果在同一个Dockerfile 中创
建多个镜像时， 可以使用多个FROM 指令（每个镜像一次）。
为了保证镜像精简， 可以选用体积较小的镜像如Alpine或Debian 作为基础镜像。例如：
ARG VERSION=9.3
FROM debian:${VERSION}
3. LABEL
LABEL 指令可以为生成的镜像添加元数据标签信息。这些信息可以用来辅助过滤出特
定镜像。
格式为LABEL <key>=<value> <key>=<value> <key>=<value> ...。
例如：
LABEL version="l.0.0-rc3"
LABEL author="yeasy@github" date="2020-01-01"
LABEL description="This 七ex七illustra七es\
tha七label-values can span mul七iple lines."
4. EXPOSE
声明镜像内服务监听的端口。
格式为EXPOSE <par七> [<par巨/<pro七ocol>... ]。
例如：
EXPOSE 22 80 8443
注意该指令只是起到声明作用， 并不会自动完成端口映射。
如果要映射端口出来， 在启动容器时可以使用-P 参数(Docker 主机会自动分配一个宿主
机的临时端口）或-p HOST_PORT:CONTAINER_PORT 参数（具体指定所映射的本地端口）。
5. ENV
指定环境变量， 在镜像生成过程中会被后续RUN指令使用， 在镜像启动的容器中也会存在。
格式为ENV <key> <value>或ENV <key>=<value>
例如：
ENV APP_VERSION=l.0.0
ENV APP_HOME=/usr/local/app
ENV PATH $PATH:/usr/local/bin
指令指定的环境变量在运行时可以被覆盖掉， 如docker run --env <key>=<value>
built_image。
注意当一条ENV 指令中同时为多个环境变量赋值并且值也是从环境变量读取时， 会为
变量都赋值后再更新。如下面的指令， 最终结果为keyl=valuel key2=value2:
ENV keyl=value2
ENV keyl=valuel key2=${keyl)
6.ENTRYPOINT
指定镜像的默认入口命令， 该入口命令会在启动容器时作为根命令执行， 所有传人值作
为该命令的参数。
支持两种格式：
ENTRYPOINT ["executable", "paraml ", "param2"]: exec 调用执行；
ENTRYPOINT command param 1 param2: shell 中执行。
此时， CMD指令指定值将作为根命令的参数。
每个Dockerfile 中只能有一个ENTRYPOINT, 当指定多个时， 只有最后一个起效。
在运行时， 可以被--entrypoint 参数覆盖掉， 如docker run --entrypoint。
```

# Sublim Text3快捷键

## 选择类

- Ctrl+D 选中光标所占的文本，继续操作则会选中下一个相同的文本。
- Alt+F3 选中文本按下快捷键，即可一次性选择全部的相同文本进行同时编辑。举个栗子：快速选中并更改所有相同的变量名、函数名等。
- Ctrl+L 选中整行，继续操作则继续选择下一行，效果和 Shift+↓ 效果一样。
- Ctrl+Shift+L 先选中多行，再按下快捷键，会在每行行尾插入光标，即可同时编辑这些行。
- Ctrl+Shift+M 选择括号内的内容（继续选择父括号）。举个栗子：快速选中删除函数中的代码，重写函数体代码或重写括号内里的内容。
- Ctrl+M 光标移动至括号内结束或开始的位置。
- Ctrl+Enter 在下一行插入新行。举个栗子：即使光标不在行尾，也能快速向下插入一行。
- Ctrl+Shift+Enter 在上一行插入新行。举个栗子：即使光标不在行首，也能快速向上插入一行。
- Ctrl+Shift+[ 选中代码，按下快捷键，折叠代码。
- Ctrl+Shift+] 选中代码，按下快捷键，展开代码。
- Ctrl+K+0 展开所有折叠代码。
- Ctrl+← 向左单位性地移动光标，快速移动光标。
- Ctrl+→ 向右单位性地移动光标，快速移动光标。
- shift+↑ 向上选中多行。
- shift+↓ 向下选中多行。
- Shift+← 向左选中文本。
- Shift+→ 向右选中文本。
- Ctrl+Shift+← 向左单位性地选中文本。
- Ctrl+Shift+→ 向右单位性地选中文本。
- Ctrl+Shift+↑ 将光标所在行和上一行代码互换（将光标所在行插入到上一行之前）。
- Ctrl+Shift+↓ 将光标所在行和下一行代码互换（将光标所在行插入到下一行之后）。
- Ctrl+Alt+↑ 向上添加多行光标，可同时编辑多行。
- Ctrl+Alt+↓ 向下添加多行光标，可同时编辑多行。

## 编辑类 

- Ctrl+J 合并选中的多行代码为一行。举个栗子：将多行格式的CSS属性合并为一行。

- Ctrl+Shift+D 复制光标所在整行，插入到下一行。

- Tab 向右缩进。

- Shift+Tab 向左缩进。

- Ctrl+K+K 从光标处开始删除代码至行尾。

- Ctrl+Shift+K 删除整行。

- Ctrl+/ 注释单行。

- Ctrl+Shift+/ 注释多行。

- Ctrl+K+U 转换大写。

- Ctrl+K+L 转换小写。

- Ctrl+Z 撤销。

- Ctrl+Y 恢复撤销。

- Ctrl+U 软撤销，感觉和 Gtrl+Z 一样。

- Ctrl+F2 设置书签

- Ctrl+T 左右字母互换。

- F6 单词检测拼写

  ## 搜索类 

- Ctrl+F 打开底部搜索框，查找关键字。
- Ctrl+shift+F 在文件夹内查找，与普通编辑器不同的地方是sublime允许添加多个文件夹进行查找，略高端，未研究。
- Ctrl+P 打开搜索框。举个栗子：1、输入当前项目中的文件名，快速搜索文件，2、输入@和关键字，查找文件中函数名，3、输入：和数字，跳转到文件中该行代码，4、输入#和关键字，查找变量名。
- Ctrl+G 打开搜索框，自动带：，输入数字跳转到该行代码。举个栗子：在页面代码比较长的文件中快速定位。
- Ctrl+R 打开搜索框，自动带@，输入关键字，查找文件中的函数名。举个栗子：在函数较多的页面快速查找某个函数。
- Ctrl+： 打开搜索框，自动带#，输入关键字，查找文件中的变量名、属性名等。
- Ctrl+Shift+P 打开命令框。场景栗子：打开命名框，输入关键字，调用sublime text或插件的功能，例如使用package安装插件。
- Esc 退出光标多行选择，退出搜索框，命令框等。

##  显示类

- - Ctrl+Tab 按文件浏览过的顺序，切换当前窗口的标签页。
  - Ctrl+PageDown 向左切换当前窗口的标签页。
  - Ctrl+PageUp 向右切换当前窗口的标签页。
  - Alt+Shift+1 窗口分屏，恢复默认1屏（非小键盘的数字）
  - Alt+Shift+2 左右分屏-2列
  - Alt+Shift+3 左右分屏-3列
  - Alt+Shift+4 左右分屏-4列
  - Alt+Shift+5 等分4屏
  - Alt+Shift+8 垂直分屏-2屏
  - Alt+Shift+9 垂直分屏-3屏
  - Ctrl+K+B 开启/关闭侧边栏。
  - F11 全屏模式
  - Shift+F11 免打扰模式