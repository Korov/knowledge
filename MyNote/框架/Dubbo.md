Dubbo是一个高性能，轻量级，基于Java的RPC框架。Dubbo包含三个主要功能：基于接口的远程调用，容错和负载均衡，自动服务注册和发现。

![image-20191127182551527](picture\image-20191127182551527.png)

Dubbo的底层是依赖Spring的，所以配置信息和Spring类似，并且需要使用Spring的Context来控制bean。



① 上面的文件其实就是类似 spring 的配置文件，而且，dubbo 底层就是 spring。
② **节点：dubbo:application**
就是整个项目在分布式架构中的唯一名称，可以在 `name` 属性中配置，另外还可以配置 `owner` 字段，表示属于谁。
下面的参数是可以不配置的，这里配置是因为出现了端口的冲突，所以配置。
③ **节点：dubbo:monitor**
监控中心配置， 用于配置连接监控中心相关信息，可以不配置，不是必须的参数。
④ **节点：dubbo:registry**
配置注册中心的信息，比如，这里我们可以配置 zookeeper 作为我们的注册中心。`address` 是注册中心的地址，这里我们配置的是 `N/A` 表示由 dubbo 自动分配地址。或者说是一种直连的方式，不通过注册中心。
⑤ **节点：dubbo:protocol**
服务发布的时候 dubbo 依赖什么协议，可以配置 dubbo、webserovice、Thrift、Hessain、http等协议。
⑥ **节点：dubbo:service**
这个节点就是我们的重点了，当我们服务发布的时候，我们就是通过这个配置将我们的服务发布出去的。`interface` 是接口的包路径，`ref` 是第 ⑦ 点配置的接口的 bean。
⑦ 最后，我们需要像配置 spring 的接口一样，配置接口的 bean。 

# 一 Dubbo--高性能RPC通信框架

## 1.1 Dubbo框架的架构

Dubbo中包含Registry、Provider、Consumer、Monitor。Provider启动时会向注册中心把自己的元数据注册上去（比如服务IP和端口等），Consumer在启动时从注册中心订阅（第一次订阅会拉取全量数据）服务提供放的元数据，注册中心发生数据变更会推送给订阅的Consumer。在获取服务元数据后，Consumer可以发起RPC调用，在RPC调用前后会向监控中心上报统计信息（比如并发数和调用的接口）。

**Dubbo着眼于解决的几个基本问题：**

- 高性能、透明的RPC调用。Dubbo可以让开发者像调用本地的方法一样调用远程服务。整个过程对上层开发者透明，Dubbo会自动完成后续的所有操作，例如：负载均衡、路由、协议转换、序列化等。开发者只需要接收对应的调用结果即可。

- 服务的自动注册与发现。Dubbo适配了多种注册中心
  - 自动负载与容错。Dubbo提供了完整的集群容错机制，可以实现软件层面的负载均衡，以此降低硬件的压力。Dubbo还提供了调用失败的各种容错机制，如Failover、Failfast、结果集合并等。
  - 动态流量调节。在应用运行时，某些服务节点可能因为硬件原因需要减少负载，或者某些节点需要人工手动下线，又或者需要实现单元化的调用、灰度功能。Dubbo提供了管理控制台，用户可以在界面上动态的调整每个服务的权重、路由规则、禁用/启用，实现运行时的流量调度
  - 依赖分析与调用统计。当应用规模进一步提升，服务间的依赖关系变得错综复杂，甚至分不清哪个应用要在哪个应用之前启动，架构师都不能完整地描述应用的架构关系。Dubbo可以接入第三方APM做分布式链路追踪与性能分析，或者使用已有的独立监控中心来监控接口的调用次数及耗时，用户可以根据这些数据反推出系统容量。



